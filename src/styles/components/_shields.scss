@import '../settings';

$speed: 1s;

.shield {
    background: url('../img/shield-lvl-dot.png') center no-repeat;
    background-size: contain;
    height: 2rem;
    width: 2rem;
}

@each $shield in $shields {
    .shield-#{$shield} {
        background-image: url('../img/shield-#{$shield}.png');
    }
}

.fancy-shield {
    margin: 1.5rem auto 3rem;
    height: 10rem;
    width: 10rem;
    position: relative;

    &:before {
        position: absolute;
        content: '';
        background: rgba($black, 0.5);
        border-radius: 50%;
        width: 50%;
        height: 5%;
        filter: blur(10px);
        bottom: -10%;
        left: 25%;
        transform: scale(1.5, 0.65);
    }

    svg {
        position: relative;
        transform-origin: center center 1cm;
        width: 100%;
        height: 100%;
        z-index: 1;

        path {
            transform-origin: center center;
        }

        path:nth-child(1) {
            // transform-origin: center center;
            fill: scale-color(map-get($apps, czech), $lightness: $darken);
        }
        path:nth-child(2) {
            // transform-origin: center center;
            fill: map-get($apps, czech);
        }
    }

    .label {
        position: absolute;
        top: 0;
        right: 0;
        bottom: 0;
        left: 0;
        transform-origin: center center 1.35cm;
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 1;
        font-size: 6rem;
        // font-weight: $font-weight-bold;
        color: $white;
        text-shadow: 0 0.5rem 1rem rgba($black, 0.15);
    }
}

.fancy-shield:hover {
    svg,
    .label {
        animation: rise-and-land $speed cubic-bezier(.8,.01,.75,1.75);
    }

    &:before {
        animation: rise-and-land-shadow $speed cubic-bezier(.8,.01,.75,1.75);
    }

    path:nth-child(1) {
        animation: wing-wave-right $speed;
    }

    path:nth-child(2) {
        animation: wing-wave-left $speed;
    }
    
    path:nth-child(4) {
        animation: wing-wave-left $speed;
    }

    path:nth-child(3) {
        animation: wing-wave-right $speed;
    }
}

.fancy-shield:active {
    svg,
    .label {
        animation: high-five $speed;
    }

    &:before {
        animation: rise-and-land-shadow $speed;
    }

    // path:nth-child(1) {}

    path:nth-child(2) {
        animation: fold-left $speed;
    }
    
    // path:nth-child(4) {}

    path:nth-child(3) {
        animation: fold-slight-left $speed;
    }
}

@keyframes high-five {
    55% {
        transform: rotate3d(1, 1, 0, 20deg);
    }    

    75% {
        transform: rotate3d(1, 1, 0, -20deg);
    }
}

@keyframes fold-left {
    55% {
        transform: rotate3d(0, 1, 0, -20deg);
    }
}

@keyframes fold-slight-left {
    55% {
        transform: rotate3d(0, 1, 0, -10deg);
    }
}

@keyframes fold-right {
    55% {
        transform: rotate3d(0, 1, 0, 20deg);
    }
}

@keyframes fold-slight-right {
    55% {
        transform: rotate3d(0, 1, 0, 10deg);
    }
}

@keyframes wing-wave-left {
    12.5%, 37.5%, 65.5% {
        transform: rotate3d(0, 1, 0, -20deg);
    }

    25%, 50%, 75% {
        transform: rotate3d(0, 1, 0, 20deg);
    }
}

@keyframes wing-wave-right {
    12.5%, 37.5%, 65.5% {
        transform: rotate3d(0, 1, 0, 20deg);
    }

    25%, 50%, 75% {
        transform: rotate3d(0, 1, 0, -20deg);
    }
}

@keyframes rise-and-land {
    80% {
        transform: translate3d(0, -15%, 0) rotate3d(1, 0, 0, -10deg) rotate3d(0, 1, 0, 5deg);
    }
}

@keyframes rise-and-land-shadow {
    80% {
        transform: scale(1.25, 0.5);
    }
}
